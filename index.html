<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Map Tool - 虚幻引擎地图生成器</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Map Tool</h1>
        
        <div class="upload-section">
            <div class="upload-box-wrapper">
                <button class="clear-btn" id="clear-heightmap-btn">清除高度图</button>
                <div class="upload-box" id="heightmap-upload">
                    <h3>拖放高度图 (16位PNG)</h3>
                    <p class="upload-hint">点击或拖放上传</p>
                    <input type="file" id="heightmap-input" accept="image/png">
                </div>
                <div class="upload-preview" id="heightmap-preview" style="margin-top: 15px;"></div>
            </div>
            <div class="upload-box-wrapper">
                <button class="clear-btn" id="clear-material-btn">清除材质图</button>
                <div class="upload-box" id="material-upload">
                    <h3>拖放材质权重图文件夹 (0.png ~ 16.png)</h3>
                    <p class="upload-hint">点击或拖放上传</p>
                    <input type="file" id="material-input" webkitdirectory multiple>
                </div>
                <div class="upload-preview" id="material-preview" style="margin-top: 15px;"></div>
            </div>
        </div>

        <div class="params-section">
            <h3>参数设置</h3>
            <div class="param-grid">
                <div class="param-item">
                    <label>海平面高度 (Sea Level)</label>
                    <input type="number" id="sea-level" value="3550">
                </div>
                <div class="param-item">
                    <label>平原坡度阈值</label>
                    <input type="number" id="plain-threshold" value="0.30" step="0.01">
                </div>
                <div class="param-item">
                    <label>丘陵坡度阈值</label>
                    <input type="number" id="hill-threshold" value="0.75" step="0.01">
                </div>
                <div class="param-item">
                    <label>采样间隔 (Cell Size)</label>
                    <input type="number" id="cell-size" value="2">
                </div>
                <div class="param-item">
                    <label>组件宽度 (Component Size)</label>
                    <input type="number" id="component-size" value="510">
                </div>
                <div class="param-item">
                    <label>网格大小 (Grid)</label>
                    <input type="number" id="grid-size" value="100" step="1">
                </div>
            </div>
        </div>

        <button id="generate-btn">生成JSON</button>

        <div class="workspace">
            <div class="material-list-panel">
                <h3>材质层列表</h3>
                <div class="material-list" id="material-list"></div>
            </div>
            <div class="preview-area">
                <div class="preview-toggle">
                    <label>
                        <input type="checkbox" id="overlay-toggle"> 叠加预览高度图和地形分类
                    </label>
                </div>
                <div class="preview-section">
                    <div class="preview-controls">
                        <button id="zoom-in-btn">放大 (+)</button>
                        <button id="zoom-out-btn">缩小 (-)</button>
                        <button id="reset-zoom-btn">重置</button>
                        <span id="zoom-level">缩放: 100%</span>
                    </div>
                    <div class="canvas-container" id="canvas-container">
                        <canvas id="preview-canvas"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="output-section">
            <h3>JSON输出</h3>
            <textarea id="json-output" readonly></textarea>
            <button id="download-btn">下载JSON</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
